{
  "hash": "593de8c10ab8fe099e699a89819670d6",
  "result": {
    "markdown": "---\ntitle: \"How to migrate from BibDesk to Zotero for pandoc-based writing\"\ndate: 2023-01-08\ndescription: \"Tips, tricks, and rationale for converting from a single big BibTeX file to a Zotero database\"\nimage: img/zotero-final.png\ntwitter-card: \n    image: \"img/zotero-final.png\"\nopen-graph: \n    image: \"img/zotero-final.png\"\ncategories:\n  - writing\n  - markdown\n  - citations\n  - pandoc\n  - zotero\n---\n\n\n\n\n\n## My longstanding workflow for writing, citing, and PDF management\n\n\nWhen I started my first master's degree program in 2008, I decided to stop using Word for all my academic writing and instead use plain text Markdown for everything. [Markdown](https://en.wikipedia.org/wiki/Markdown) itself had been a thing for 4 years, and [MultiMarkdown](https://fletcherpenney.net/multimarkdown/)—a [pandoc](https://en.wikipedia.org/wiki/Pandoc)-like extension of Markdown that could handle BibTeX bibliographies—was brand new. I did all my writing for my courses and my thesis in Markdown and converted it all to PDF through LaTeX using MultiMarkdown. I didn't know about pandoc yet, so I only ever converted to PDF, not HTML or Word.\n\nI stored all my bibliographic references in a tiny little `references.bib` BibTeX file that I managed with [BibDesk](https://bibdesk.sourceforge.io/). BibDesk is a wonderful and powerful program with an active developer community and it does all sorts of neat stuff like auto-filing PDFs, importing references from DOIs, searching for references on the internet from inside the program, and just providing a nice overall front end for dealing with BibTeX files.\n\nI kept using my MultiMarkdown + LaTeX output system throughout my second master's degree, and my `references.bib` file and PDF database slowly grew. R Markdown hadn't been invented yet and I still hadn't discovered pandoc, so living in a mostly LaTeX-based world was fine.\n\nWhen I started my PhD in 2012, something revolutionary happened: [the {knitr} package](https://yihui.org/knitr/) was invented. The new [R Markdown](https://rmarkdown.rstudio.com/) format let you to mix R code with Markdown text and create multiple outputs (HTML, LaTeX, and docx) through pandoc. I abandoned MultiMarkdown and fully converted to pandoc (thanks also in part to Kieran Healy's [*Plain Person's Gide to Plain Text Social Science*](https://plain-text.co/)). Since 2012, I've written exclusively in pandoc-flavored Markdown and always make sure that I can convert everything to PDF, HTML, and Word (see the \"Manuscript\" entry [in the navigation bar here](https://stats.andrewheiss.com/cautioning-canary/), for instance, where you can download the preprint version of that paper in a ton of different formats). I recently converted [a bunch of my output templates](https://github.com/andrewheiss/hikmah-academic-quarto) to [Quarto pandoc](https://quarto.org/) too.\n\nDuring all this time, I didn't really keep up with other reference managers. I used super early [Zotero](https://www.zotero.org/) as an undergrad back in 2006–2008, but it didn't fit well with my Markdown-based workflow, so I kind of ignored it. I picked it up again briefly at the beginning of my PhD, but I couldn't get it to play nicely with R Markdown and pandoc, so I kept using trusty old BibDesk. My `references.bib` file got bigger and bigger as I took more and more doctoral classes and did more research, but BibDesk handled the growing library just fine. As of today, I've got 1,400 items in there with nearly 1,000 PDFs, and everything still works great—mostly.\n\n## Why switch away from BibTeX and BibDesk?\n\nBibDesk got me through my dissertation and all my research projects up until now, so why consider switching away to some other system? Over the past few years, as I've done more reading on my iPad and worked on more coauthored projects, I've run into a few pain points in my citation workflow.\n\n### Problem 1: Cross-device reading\n\nI enjoy reading PDFs on my iPad (particularly in the [iAnnotate app](https://www.folia.com/iannotate)), but getting PDFs from BibDesk onto the iPad has always required a bizarre dance:\n\n1. Store `references.bib` and the BibDesk-managed folder of PDFs in Dropbox\n2. Use the [References](https://sites.google.com/site/appsformaths/references) iPad app to open the BibTeX file from Dropbox on the iPad\n3. Use iAnnotate to navigate Dropbox and find the PDF I want to read\n4. Read and annotate the PDF in iAnnotate\n5. Send the finished PDF from iAnnotate back to Dropbox and go back to References to ensure that the annotated PDF updates\n\nI'd often get sick of this convoluted process and just find the PDF on my computer and AirDrop it to my iPad directly, completely circumventing Dropbox. I'd then AirDrop it back to my computer and attach the marked up PDF to the reference in BibDesk. It's inconvenient, but less inconvenient than bouncing around a bunch of different apps and hoping everything works.\n\n### Problem 2: Collaboration across many projects with many coauthors\n\nCollaboration with a single huge `references.bib` file is impossible. I could share my Dropbox folder with coauthors, but then they'd see all my entries and have access to all my annotated PDFs, which seems like overkill. As I started working with coauthors, I decided to make smaller project-specific `.bib` files that would be shareable and editable. \n\nThis is great for project modularity—see how [this `bibliography.bib` file](https://github.com/andrewheiss/cautioning-canary/blob/master/manuscript/bibliography.bib) only contains things we cited? But it caused *major* synchronization problems. If me or a coauthor makes any edits to the project-specific files (adding a DOI to an existing entry, adding a new entry, etc.), those changes don't show up in my big master `references.bib` file. I have to remember to copy those changes to the main file, and I never remember. With some recent projects, I've actually been copying some entries from previous projects' `.bib` files rather than from the big `references.bib` file. Everything's diverging and it's a pain.\n\n### Problem 3: BibTeX was designed for LaTeX—but just LaTeX\n\nBibTeX works great with LaTeX. That's why it was invented in the first place! The fact that things like pandoc work with it is partially a historical accident—`.bib` files were a convenient and widely used plain text bibliography format, so pandoc and MultiMarkdown used BibTeX for citations. \n\nBut citations are often more complicated than BibTeX can handle. Consider the LaTeX package [biblatex-chicago](https://ctan.org/pkg/biblatex-chicago?lang=en)—in order to be fully compliant with all the intricacies of the Chicago Manual of Style, it has to expand the BibTeX (technically BibLaTeX) format to include fields like `entrysubtype` for distinguishing between magazine/newspaper articles and journal articles, among dozens of other customizations and tweaks. BibTeX has a limited set of entry types, and anything that's not one of those types gets shoehorned into the `misc` type. \n\nInternally, programs like pandoc that can read BibTeX files convert them into a standard [Citation Style Language (CSL)](https://en.wikipedia.org/wiki/Citation_Style_Language) format, which it then uses to format references as Chicago, APA, MLA, or whatever. It would be great to store all my citations in a CSL-compliant format in the first place rather than as a LaTeX-only format that has to be constantly converted on-the-fly when converting to any non-LaTeX output. \n\n### The solution: Zotero\n\nZotero conveniently fixes all these issues:\n\n1. It has [a synchronization service](https://www.zotero.org/support/sync) that works across platforms (including iOS). [It can work with Dropbox too](https://ikashnitsky.github.io/2019/zotero/) if you don't want to be bound by their file size limit or pay for extra storage, though I ended up paying for storage to (1) support open source software and (2) not have to deal with multiple programs. I've been doing the BibDesk → iAnnotate → Dropbox → MacBook → AirDrop dance for too many years—I just want Zotero to handle all the syncing for me.\n\n2. It's **super easy** to collaborate with Zotero. You can create shared group libraries with different sets of coauthors and not worry about Dropbox synchronization issues or accidental deletion of `}` characters in the `.bib` file. For one of my reading-intensive class, [I've even created a shared Zotero group library](https://compasp23.classes.andrewheiss.com/class/) that all the students can join and cite from, which is neat.\n\n   It's also far easier to maintain a master list of references. You can create a [Zotero collection](https://www.zotero.org/support/collections_and_tags) for specific projects, and items can live in multiple collections. Editing an item in one collection updates that item in all other collections. Zotero treats collections like iTunes/Apple Music playlists—just like songs can belong to multiple playlists, bibliographic entries can belong to multiple collections.\n\n3. Zotero follows the CSL standard that pandoc uses. It was the first program to adopt CSL (way back in 2006!). It supports all kinds of entry types and fields, beyond what BibTeX supports.\n\n## Preparing for the migration\n\nMigrating my big `.references.bib` file to Zotero was a relatively straightforward process, but it required a few minor shenanigans to get everything working right.\n\n### Make a backup\n\nPreparing everything for migration meant I had to make a ton of edits to the original `references.bib` file, so I made a copy of it first and worked with the copy.\n\n### Install extensions\n\nTo make Zotero work nicely with a pandoc-centric writing workflow, and to make file management and tag management easier, I installed these three extensions:\n\n- [Better BibTeX](https://retorque.re/zotero-better-bibtex/)\n- [ZotFile](http://zotfile.com/)\n- [Zotero Tag](https://github.com/windingwind/zotero-tag)\n\n### Ratings and read status\n\nBibDesk allows you to add a couple extra metadata fields to entries for ratings and to mark them as read. I've used these fields for years and find them super useful for keeping track of how much I like articles and for remembering which ones I've actually finished.\n\nInternally, BibDesk stores this data as entries in the raw BibTex:\n\n```bibtex\n@article{the_citekey_for_this_entry,\n\tauthor = {Whoever},\n\ttitle = {Whatever},\n\t...\n\trating = {4},\n\tread = {1}}\n```\n\nThese fields are preserved and transferred to Zotero when you import the file, but they show up in the \"Extra\" field and aren't easily filterable or sortable there:\n\n![Extra fields from a BibTeX file](img/extra-fields.png){.border .rounded width=60% fig-alt=\"Extra fields from a BibTeX file\"}\n\nI decided to treat these as Zotero tags, which BibDesk calls keywords. I considered making some sort of programmatic solution and writing a script to convert all the `rating` and `read` fields to `keywords`, but that seemed like too much work—many entries have existing keywords and parsing the file and concatenating ratings and read status to the list of keywords would be hard. \n\nSo instead I sorted all my entries in BibDesk by rating, selected all the 5 star ones and added a `zzzzz` tag, selected all the 4 star ones and added a `zzzz` tag, and so on (so that 1 star entries got a `z`) tag. I then sorted the entries by read status and assigned `xxx` to all the ones I've read. These tag names were just temporary—in Zotero I changed these to emojis (⭐️⭐️⭐️  and ✅), but because I was worried about transferring complex Unicode characters like emojis across programs, I decided to simplify things by temporarily just using ASCII characters.\n\n### Files\n\n#### Fixing BibDesk's stored filename\n\nBibDesk can autofile attached PDFs and manage their location. To keep track of where the files are, it stores their path as a base64-encoded path in a `bdsk-file-N` field in the `.bib` file, like this:\n\n```bibtex\n@article{HeissKelley:2017,\n\tauthor = {Andrew Heiss and Judith G. Kelley},\n\tdoi = {10.1086/691218},\n\tjournal = {Journal of Politics},\n\tmonth = {4},\n\tnumber = {2},\n\tpages = {732--41},\n\ttitle = {Between a Rock and a Hard Place: International {NGOs} and the Dual Pressures of Donors and Host Governments},\n\tvolume = {79},\n\tyear = {2017},\n\tbdsk-file-1 = {YnBsaXN0MDDSAQIDBFxyZWxhdGl2ZVBhdGhZYWxpYXNEYXRhXxBcUGFwZXJzL0hlaXNzS2VsbGV5MjAxNyAtIEJldHdlZW4gYSBSb2NrIGFuZCBhIEhhcmQgUGxhY2UgSW50ZXJuYXRpb25hbCBOR09zIGFuZCB0aGUgRHVhbC5wZGZPEQJ8AAAAAAJ8AAIAAAxNYWNpbnRvc2ggSEQAAAAAAAAAAAAAAAAAAADfgQ51QkQAAf////8fSGVpc3NLZWxsZXkyMDE3IC0gI0ZGRkZGRkZGLnBkZgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA/////9T5sk0AAAAAAAAAAAABAAMAAAogY3UAAAAAAAAAAAAAAAAABlBhcGVycwACAHwvOlVzZXJzOmFuZHJldzpEcm9wYm94OlJlYWRpbmdzOlBhcGVyczpIZWlzc0tlbGxleTIwMTcgLSBCZXR3ZWVuIGEgUm9jayBhbmQgYSBIYXJkIFBsYWNlIEludGVybmF0aW9uYWwgTkdPcyBhbmQgdGhlIER1YWwucGRmAA4ArABVAEgAZQBpAHMAcwBLAGUAbABsAGUAeQAyADAAMQA3ACAALQAgAEIAZQB0AHcAZQBlAG4AIABhACAAUgBvAGMAawAgAGEAbgBkACAAYQAgAEgAYQByAGQAIABQAGwAYQBjAGUAIABJAG4AdABlAHIAbgBhAHQAaQBvAG4AYQBsACAATgBHAE8AcwAgAGEAbgBkACAAdABoAGUAIABEAHUAYQBsAC4AcABkAGYADwAaAAwATQBhAGMAaQBuAHQAbwBzAGgAIABIAEQAEgB6VXNlcnMvYW5kcmV3L0Ryb3Bib3gvUmVhZGluZ3MvUGFwZXJzL0hlaXNzS2VsbGV5MjAxNyAtIEJldHdlZW4gYSBSb2NrIGFuZCBhIEhhcmQgUGxhY2UgSW50ZXJuYXRpb25hbCBOR09zIGFuZCB0aGUgRHVhbC5wZGYAEwABLwAAFQACAA3//wAAAAgADQAaACQAgwAAAAAAAAIBAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAMD}}\n```\n\nZotero doesn't parse that gnarly field—it needs a field named `file`—and it doesn't decode that messy string into a plain text file path, so the attached PDF won't get imported correctly.\n\nThis is easily fixable, though, thanks to [this Zotero forum comment](https://forums.zotero.org/discussion/comment/348017/#Comment_348017):\n\n1. [Download and install](https://github.com/andriusvelykis/bibdesk-scripts) `LinkedFilesToFields.applescript` into BibDesk\n2. Change two things in the AppleScript file:\n\t1. Set `property useRelativePath` to `false`\n\t2. Set `FileLinkEntry` to `\"File\"`\n3. Run the AppleScript file to convert all the base64-encoded paths to regular paths\n\nIf you look at the `.bib` file, it looks like this now:\n\n```bibtex\n@article{HeissKelley:2017,\n\t...\n\tfile = {/Users/andrew/Dropbox/Readings/Papers/HeissKelley2017 - Between a Rock and a Hard Place International NGOs and the Dual.pdf},\n\t...}\n```\n\n#### Customizing Zotero's renaming rules\n\nI wanted all the PDFs that Zotero would manage to have nice predictable filenames. In BibDesk, I used this pattern:\n\n```\ncitekey - First few words of title.pdf\n```\n\nThat's been fine, but it uses spaces in the file name and doesn't remove any punctuation or special characters, so it was a little trickier to work with in the terminal or with scripts or for easy consistent searching (especially when searching in the iPad Dropbox app when looking for a PDF to read). But because I set up that pattern in 2008, [path dependency](https://en.wikipedia.org/wiki/Path_dependence) kind of locked me in and I've been unwilling to change it since. \n\nSince I'm starting with a whole new reference manager, I figured it was time to adopt a better PDF naming system. In the ZotFile preferences, I set this pattern:\n\n```\n{%a-}{%y-}{%t}\n```\n\n…which translates to \n\n```\nup_to_three_last_names-year-first_few_characters_of_title.pdf\n```\n\n*(see [this for a list of all the possible wildcards](http://zotfile.com/index.html#renaming-rules))*\n\n…with `-` separating the three logical units (authors, year, title), and `_` separating all the words within each unit (which follows [Jenny Bryan's principles of file naming](http://www2.stat.duke.edu/~rcs46/lectures_2015/01-markdown-git/slides/naming-slides/naming-slides.pdf)). In practice, the pattern looks like this:\n\n```\nheiss_kelley-2017-between_a_rock_and_a_hard_place.pdf\n```\n\nI had to tweak a few other renaming settings too. Here's the final set of preferences:\n\n![ZotFile preferences](img/zotfile-preferences.png){width=80% fig-alt=\"ZotFile preferences\"}\n\nI wanted to switch the roles of `-` and `_` and do \n\n```\nheiss-kelley_2017_between-a-rock-and-a-hard-place.pdf\n```\n\n…but Zotero and/or ZotFile seems to hardwire `_` as the space replacement in its titles. Oh well.\n\n### Citekeys\n\nIn BibDesk, I've had a citation key pattern that I've used for years: `Lastname:Year`, with up to three last names for coauthored things, and an incremental lowercase letter in the case of duplicates:\n\n```\nHeissKelley:2017\nHeissKelley:2017a\nImbens:2021\nLundbergJohnsonStewart:2021\n```\n\nZotero and Better BibTeX preserve citekeys when you import a `.bib` file, but I wanted to make sure I keep using this system for new items I add going forward, so I changed the Better BibTeX preferences to use the same pattern:\n\n```\nauth(0,1) + auth(0,2) + auth(0,3) + \":\" + year\n```\n\n![Better BibTeX settings](img/bbt-settings.png){width=90% fig-alt=\"Better BibTeX settings\"}\n\n\n## Post-import tweaks\n\nWith all that initial prep work done, I imported the `.bib` file into my Zotero library (File > Import…). I made sure \"Place imported collections and items to new collection\" was checked and that files were copied to the Zotero storage folder:\n\n![Zotero's import dialog](img/zotero-import.png){width=90% fig-alt=\"Zotero's import dialog\"}\n\n### Ratings and read status\n\nThe Tags panel in Zotero then showed all the project/class-specific keywords from BibDesk, in addition to the ratings and read status tags I added previously:\n\n![Tags before renaming](img/tags-pre-renaming.png){width=50% fig-alt=\"Tags before renaming\"}\n\nI renamed each of the `zzz*` rating tags to use emoji stars and renamed the `xxx` read tag to use ✅. \n\n![Tags after renaming](img/tags-post-renaming.png){width=50% fig-alt=\"Tags after renaming\"}\n\nZotero has the ability to assign tags specific colors and pin them in a specific order, which also makes the tags display in the main Zotero library list. Following [advice from the Zotero Tag extension](https://github.com/windingwind/zotero-tag/blob/master/docs/item-star.md), I pinned the read status ✅  tag as the first tag, the 5-star rating as the second tag, the 4-star rating as the third tag, and so on.\n\nNow the read status and ratings tags are easily accessible and appear directly in the main Zotero library list!\n\n![Zotero library with read status and ratings tags](img/library-with-read-ratings.png){width=100% fig-alt=\"Zotero library with read status and ratings tags\"}\n\n### Tags to collections\n\nZotero has two different methods for categorizing entries—[tags and collections](https://www.zotero.org/support/collections_and_tags)—while BibDesk / BibTeX only uses keywords, which Zotero treats as tags. \n\nI decided that in Zotero I'd use both tags and collections. Tags are reserved for things like general topics, ratings, to-read designations, etc., while collections represent specific projects or classes. \n\nI already assigned project- and class-specific keywords in BibDesk, so I just needed to move those keyworded entries into Zotero collections. There's no way (that I could find) to include collection information in the `.bib` file and have it import into Zotero, so I ended up manually creating collections for each of the imported keywords. I filtered the library to only show items from one of the future collections, selected all the items, right-clicked, and chose \"Add to collection\" > \"New collection…\" and created a new collection. I then deleted the tag.\n\nFor instance, here's what Zotero looked like after I assigned these 6 items, tagged as \"Polsci 733\", to the new \"Polsci 733\" collection (shown in the folder in the sidebar). I just had to delete the tag after:\n\n![Example of the Polsci 733 tag after being converted to a collection](img/example-733.png){width=100% fig-alt=\"Example of the Polsci 733 tag after being converted to a collection\"}\n\n### `incollection`  / `inbook` and `crossref`\n\nThis is the one major obstacle I ran into when importing my stuff and I couldn't find any way around it.\n\n[BibDesk natively supports the `crossref` field](https://bibdesk.sourceforge.io/manual/BibDeskHelp_2.html#SEC18), which biber and biblatex use when working with LaTeX. This field lets you set up child/parent relationships with items, where children inherit fields from their parents. For instance, consider these two items—an edited book with lots of chapters from different authors and a chapter from that book:\n\n```bibtex\n@inbook{El-HusseiniToeplerSalamon:2004,\n\tauthor = {Hashem El-Husseini and Stefan Toepler and Lester M. Salamon},\n\tchapter = {12},\n\tcrossref = {SalamonSokolowski:2004},\n\tpages = {227--32},\n\ttitle = {Lebanon}}\n\n@book{SalamonSokolowski:2004,\n\taddress = {Bloomfield, CT},\n\teditor = {Lester M. Salamon and S. Wojciech Sokolowski},\n\tpublisher = {Kumarian Press},\n\ttitle = {Global Civil Society: Dimensions of the Nonprofit Sector},\n\tvolume = {2},\n\tyear = {2004}}\n```\n\nIn BibDesk, the chapter displays like this:\n\n![BibDesk editor window for a book chapter that inherits its parent book's attributes](img/bibdesk-crossref.png){width=100% fig-alt=\"BibDesk editor window for a book chapter that inherits its parent book's attributes\"}\n\nFields like book title, publisher, year, etc., are all greyed out because they're inherited from the parent book, with the citekey `SalamonSokolowski:2004`\n\nWhen importing the `.bib` file, though, the chapter doesn't get any of the parent information—book title, date, publisher, etc. are all blank:\n\n![Cross referenced parent attributes in Zotero aren't imported and fields are blank](img/blank-crossref-fields.png){width=50% fig-alt=\"Cross referenced parent attributes in Zotero aren't imported and fields are blank\"}\n\nBoo :(\n\nIt's really hard to search for anything related to this issue on Google, GitHub, or the Zotero forums since \"Crossref\" refers to both [Crossref.org](https://www.crossref.org/) (a site for searching DOIs) and the `crossref` field in BibLaTeX. I even tried to see if there was a way to break the child/parent relationship and somehow embed all the inherited fields as actual fields in BibDesk, but couldn't find a way to do it.\n\nSo I just gave up and handled these manually. The `crossref` field was imported and stored in the \"Extra\" field in Zotero:\n\n![BibLaTeX's crossref field stored in the Extra field in Zotero](img/crossref-extra.png){.border .rounded width=60% fig-alt=\"BibLaTeX's crossref field stored in the Extra field in Zotero\"}\n\nI searched for all entries that contained \"crossref\", used the [Zutilo plugin](https://github.com/wshanks/Zutilo) to copy the fields from the parent item, and then pasted those copied fields into empty fields in the child items:\n\n![Using Zutilo to paste parent fields into unused fields in a child item](img/zutilo.png){width=100% fig-alt=\"Using Zutilo to paste parent fields into unused fields in a child item\"}\n\nIt was a pain doing that for a couple dozen books and their child items, but it worked 🤷‍♂️\n\n### All done!\n\nAnd with that, I have a complete version of my 15-year-old `references.bib` file inside Zotero!\n\n![Complete Zotero library](img/zotero-final.png){width=100% fig-alt=\"Complete Zotero library\"}\n\n## Example workflow with Quarto / R Markdown / pandoc\n\nPart of the reason I've been hesitant to switch away from BibDesk for so long is because I couldn't figure out a way to connect a Markdown document to my Zotero database. With documents that get parsed through pandoc (like R Markdown or Quarto), you add a line in the YAML front matter to specify what file contains your references:\n\n```yaml\n---\ntitle: Whatever\nauthor: Whoever\nbibliography: references.bib\n---\n```\n\nSince Zotero keeps everything in one big database, I didn't see a way to add something like `bibliography: My Zotero Database` to the YAML front matter—pandoc requires that you point to a plain text file like `.bib` or `.json`  or `.yml`, not a Zotero database.\n\nHowever, the [magical Better BibTeX add-on](https://retorque.re/zotero-better-bibtex/) clarified everything for me and makes it super easy to point pandoc at a single file that contains a collection of reference items.\n\n### Export collection to `.bib` file\n\nFirst, create a collection of items that you want to cite in your writing project. Since collections are like playlists and items can belong to multiple collections, there's no need to manage duplicate entries or anything (like I was running into with [Problem 2 above](#problem-2-collaboration-across-many-projects-with-many-coauthors)).\n\nRight click on the collection name and choose \"Export collection…\". \n\n![Exporting a Zotero collection](img/export-collection.png){width=70% fig-alt=\"Exporting a Zotero collection\"}\n\nChange the format to \"Better BibLaTeX\", check \"Keep updated\", and choose a place to save the resulting `.bib` file.\n\n![Changing the export format](img/export-format.png){width=60% fig-alt=\"Changing the export format\"}\n\n::: {.callout-tip}\nYou could also export it as \"Better CSL JSON\" or \"Better CSL YAML\", which would create a `.json` or `.yml` file that you could then point to in your YAML front matter, which would keep everything in CSL format instead of converting things to `.bib` and back again (see [Problem 3 above](#problem-3-bibtex-was-designed-for-latexbut-just-latex)). However, in my academic writing projects I still like to let LaTeX, BibLaTeX, and biber handle the citation generation instead of pandoc *for PDFs*, so I still rely on `.bib` files. But if you're not converting to PDF, or if you're letting the CSL style template handle the citations instead of BibLaTeX, [you should probably keep everything as JSON or YAML](https://retorque.re/zotero-better-bibtex/exporting/pandoc/) instead of `.bib`.\n:::\n\nThe \"Keep updated\" option is the magical part of this whole thing. If you add an item or edit an existing item in the collection in Zotero, **Better BibTeX will automatically re-export the collection** to the `.bib` file. You can have one central repository of citations and lots of dynamically updated plain text `.bib` files that you don't have to edit or keep track of. Truly magical.\n\n### Point the `.qmd` / `.Rmd` / `.md` to the exported file\n\nYou'll now have a `.bib` file that contains all the references that you can cite. Put that filename in your front matter (use `.json` or `.yml` if you export the file as JSON or YAML instead):\n\n```yaml\n---\ntitle: Whatever\nauthor: Whoever\nbibliography: name_of_file_you_exported_from_zotero.bib\n---\n```\n\n### Cite things\n\nCite things [like normal](https://quarto.org/docs/authoring/footnotes-and-citations.html#sec-citations). \n\nBecause the front matter is pointed at a plain text `.bib` file that contains all the bibliographic references, it'll generate the citations correctly. And because Better BibTeX is configured to automatically update the exported plain text file, any changes you make in Zotero will automatically be reflected. Again, this is magic.\n\n![Visual Studio Code with a Quarto Markdown file configured to look at an auto-updating .bib file exported from Zotero](img/vscode-output.png){width=100% fig-alt=\"Visual Studio Code with a Quarto Markdown file configured to look at an auto-updating .bib file exported from Zotero\"}\n\n### RStudio-based alternative\n\nAlternatively, if you write in RStudio, you can connect RStudio to your Zotero database and have it do a similar auto-export thing. You can also tell it to use Better BibTeX to keep things automatically synced:\n\n![RStudio preferences pane for enabling Zotero](img/rstudio-zotero.png){width=80% fig-alt=\"RStudio preferences pane for enabling Zotero\"}\n\n*([See here for more details about Zotero citations in RStudio](https://rstudio.github.io/visual-markdown-editing/citations.html))*\n\nOne extra nice thing about using RStudio is its [fancy Insert Citation dialog](https://rstudio.github.io/visual-markdown-editing/citations.html#inserting-citations), which makes adding citations in Markdown just like adding citations in Word or Google Docs. It only works in the Visual Markdown Editor, though, which I don't normally use, so I just use Better BibTeX alone rather than RStudio's Zotero connection when I write in RStudio.\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}